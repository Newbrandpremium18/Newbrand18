<!DOCTYPE html>
<html lang="hi">
<head>
  <meta charset="utf-8" />
  <title>‡§Æ‡•á‡§∞‡•Ä ‡§ï‡§™‡§°‡§º‡•ã‡§Ç ‡§ï‡•Ä ‡§¶‡•Å‡§ï‡§æ‡§®</title>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <style>
    :root{
      --brand:#ff6600; --bg:#f8f8f8; --text:#222; --muted:#666; --card:#fff; --border:#e5e5e5;
    }
    *{box-sizing:border-box}
    body{margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;background:var(--bg);color:var(--text)}
    header{position:sticky;top:0;z-index:20;background:var(--brand);color:#fff;box-shadow:0 2px 10px rgba(0,0,0,.08)}
    .wrap{max-width:1100px;margin:0 auto;padding:12px 16px;display:flex;gap:10px;align-items:center}
    h1{margin:0;font-size:20px}
    .tag{font-size:12px;opacity:.9;margin-top:-2px}
    .search{flex:1;display:flex;gap:8px}
    .search input{flex:1;padding:10px 12px;border-radius:12px;border:1px solid #ffffff66;color:#111}
    .btn{border:0;border-radius:12px;padding:10px 14px;background:#fff1;color:#fff;cursor:pointer}
    .btn:hover{background:#fff2}
    nav.filters{max-width:1100px;margin:10px auto 0;display:flex;gap:8px;flex-wrap:wrap;padding:0 16px}
    nav.filters button, select{padding:8px 12px;border-radius:999px;border:1px solid var(--border);background:#fff;color:#222;cursor:pointer}
    nav.filters .active{background:var(--brand);color:#fff;border-color:var(--brand)}
    main{max-width:1100px;margin:12px auto 80px;padding:0 16px;display:grid;grid-template-columns:repeat(1,minmax(0,1fr));gap:12px}
    @media(min-width:560px){main{grid-template-columns:repeat(2,1fr)}}
    @media(min-width:860px){main{grid-template-columns:repeat(3,1fr)}}
    .card{background:var(--card);border:1px solid var(--border);border-radius:16px;padding:12px}
    .card img{width:100%;height:200px;object-fit:cover;border-radius:12px}
    .title{margin:8px 0 4px;font-weight:700}
    .price{color:#d35400;font-weight:700}
    .muted{color:var(--muted);font-size:12px}
    .wfull{width:100%}
    footer{position:sticky;bottom:0;background:#fff;border-top:1px solid var(--border)}
    .foot{max-width:1100px;margin:0 auto;padding:10px 16px;display:flex;justify-content:space-between;align-items:center;gap:8px}
    .cta{background:var(--brand);color:#fff;border:0;border-radius:10px;padding:10px 14px;cursor:pointer}
    /* Drawer (Cart) */
    .drawer{position:fixed;inset:0;display:none;background:rgba(0,0,0,.5)}
    .drawer.open{display:flex;justify-content:flex-end}
    .panel{width:360px;max-width:96vw;background:#fff;height:100%;padding:14px 14px 80px;border-left:1px solid var(--border);overflow:auto}
    .row{display:flex;align-items:center;gap:10px}
    .space{justify-content:space-between}
    .line{height:1px;background:var(--border);margin:10px 0}
    .qtybtn{border:1px solid var(--border);background:#fff;border-radius:8px;width:28px;height:28px;cursor:pointer}
    .danger{color:#b00020;background:#b0002010;border:1px solid #b0002022}
    /* Modal */
    .modal{position:fixed;inset:0;display:none;align-items:center;justify-content:center;background:rgba(0,0,0,.5);padding:16px}
    .modal.open{display:flex}
    .sheet{background:#fff;border-radius:16px;border:1px solid var(--border);padding:16px;width:min(420px,96vw)}
    .sheet h3{margin:0 0 10px}
    .sheet input,.sheet textarea{width:100%;padding:10px 12px;border:1px solid var(--border);border-radius:10px;margin:6px 0}
    .sheet .grid2{display:grid;grid-template-columns:1fr 1fr;gap:8px}
    .x{background:#eee;border:1px solid #ddd;border-radius:10px;padding:8px 10px;cursor:pointer}
    /* Chips */
    .chip{border:1px solid var(--border);padding:6px 10px;border-radius:999px;background:#fff;cursor:pointer}
    .chip.active{background:#111;color:#fff;border-color:#111}
  </style>
</head>
<body>

<header>
  <div class="wrap">
    <div style="display:flex;gap:8px;align-items:center">
      <div style="font-size:22px">üõçÔ∏è</div>
      <div>
        <h1 id="shopTitle">‡§Æ‡•á‡§∞‡•Ä ‡§ï‡§™‡§°‡§º‡•ã‡§Ç ‡§ï‡•Ä ‡§¶‡•Å‡§ï‡§æ‡§®</h1>
        <div class="tag" id="shopTag">Stylish ‡§ï‡§™‡§°‡§º‡•á ‡§∏‡§∏‡•ç‡§§‡•á ‡§¶‡§æ‡§Æ ‡§Æ‡•á‡§Ç!</div>
      </div>
    </div>
    <div class="search">
      <input id="searchBox" placeholder="‡§ñ‡•ã‡§ú‡•á‡§Ç: ‡§ü‡•Ä-‡§∂‡§∞‡•ç‡§ü, ‡§ï‡•Å‡§∞‡•ç‡§§‡•Ä, ‡§ú‡•Ä‡§®‡•ç‡§∏..." />
    </div>
    <button class="btn" id="loginBtn">üë§ ‡§≤‡•â‡§ó‡§ø‡§®</button>
    <button class="btn" id="cartBtn">üõí ‡§ï‡§æ‡§∞‡•ç‡§ü <span id="cartCount">0</span></button>
  </div>
  <nav class="filters">
    <div id="catChips"></div>
    <div style="margin-left:auto;display:flex;gap:8px;align-items:center">
      <label class="muted">‡§õ‡§æ‡§Å‡§ü‡•á‡§Ç:</label>
      <select id="sortSel">
        <option value="reco">‡§Ö‡§®‡•Å‡§∂‡§Ç‡§∏‡§ø‡§§</option>
        <option value="price_asc">‡§ï‡•Ä‡§Æ‡§§: ‡§ï‡§Æ ‚Üí ‡§ú‡•ç‡§Ø‡§æ‡§¶‡§æ</option>
        <option value="price_desc">‡§ï‡•Ä‡§Æ‡§§: ‡§ú‡•ç‡§Ø‡§æ‡§¶‡§æ ‚Üí ‡§ï‡§Æ</option>
        <option value="rating">‡§∞‡•á‡§ü‡§ø‡§Ç‡§ó</option>
      </select>
    </div>
  </nav>
</header>

<main id="grid"></main>

<footer>
  <div class="foot">
    <div class="muted">üìû 9876543210 ‚Ä¢ üìß kapde@dukaan.com</div>
    <button class="cta" id="checkoutBtn">‚úÖ ‡§ë‡§∞‡•ç‡§°‡§∞ ‡§ï‡§∞‡•á‡§Ç</button>
  </div>
</footer>

<!-- Cart Drawer -->
<div class="drawer" id="cartDrawer">
  <div class="panel">
    <div class="row space">
      <h3>üõí ‡§Ü‡§™‡§ï‡§æ ‡§ï‡§æ‡§∞‡•ç‡§ü</h3>
      <button class="x" id="closeCart">‡§¨‡§Ç‡§¶ ‡§ï‡§∞‡•á‡§Ç ‚úñ</button>
    </div>
    <div id="cartItems"></div>
    <div class="line"></div>
    <div class="row space">
      <strong>‡§ï‡•Å‡§≤:</strong>
      <strong id="cartTotal">‚Çπ0</strong>
    </div>
    <p class="muted">‡§ü‡•à‡§ï‡•ç‡§∏/‡§∂‡§ø‡§™‡§ø‡§Ç‡§ó ‡§°‡•á‡§Æ‡•ã ‡§Æ‡•á‡§Ç ‡§∂‡§æ‡§Æ‡§ø‡§≤ ‡§®‡§π‡•Ä‡§Ç ‡§π‡•à‡§Ç‡•§</p>
  </div>
</div>

<!-- Login Modal -->
<div class="modal" id="loginModal">
  <div class="sheet">
    <div class="row space"><h3>üë§ ‡§≤‡•â‡§ó‡§ø‡§®</h3><button class="x" data-close="#loginModal">‚úñ</button></div>
    <form id="loginForm">
      <div class="grid2">
        <input name="name" placeholder="‡§®‡§æ‡§Æ" required />
        <input name="phone" placeholder="‡§Æ‡•ã‡§¨‡§æ‡§á‡§≤" required />
      </div>
      <button class="cta wfull" type="submit">‡§≤‡•â‡§ó‡§ø‡§®</button>
    </form>
  </div>
</div>

<!-- Order Modal -->
<div class="modal" id="orderModal">
  <div class="sheet">
    <div class="row space"><h3>‚úÖ ‡§ë‡§∞‡•ç‡§°‡§∞ ‡§´‡•â‡§∞‡•ç‡§Æ</h3><button class="x" data-close="#orderModal">‚úñ</button></div>
    <form id="orderForm">
      <input name="name" placeholder="‡§®‡§æ‡§Æ" required />
      <input name="phone" placeholder="‡§Æ‡•ã‡§¨‡§æ‡§á‡§≤" required />
      <textarea name="address" rows="3" placeholder="‡§™‡§§‡§æ" required></textarea>
      <button class="cta wfull" type="submit">‡§ë‡§∞‡•ç‡§°‡§∞ ‡§ï‡§®‡•ç‡§´‡§∞‡•ç‡§Æ ‡§ï‡§∞‡•á‡§Ç</button>
    </form>
  </div>
</div>

<script>
/* =========================
   /* =========================
   /* =========================
   EDIT HERE (Config Section)
   ========================= */
const CONFIG {
  shopName: "New Brand ‡§ï‡§™‡§°‡§º‡•ã‡§Ç ‡§ï‡•Ä ‡§¶‡•Å‡§ï‡§æ‡§®",
  shopTagline: "Stylish ‡§ï‡§™‡§°‡§º‡•á, ‡§∏‡§∏‡•ç‡§§‡•á ‡§¶‡§æ‡§Æ ‡§Æ‡•á‡§Ç!",
  categories: ["‡§∏‡§¨","‡§ü‡•Ä-‡§∂‡§∞‡•ç‡§ü","‡§ï‡•Å‡§∞‡•ç‡§§‡•Ä","‡§∂‡§∞‡•ç‡§ü","‡§ú‡•Ä‡§®‡•ç‡§∏","‡§ú‡•Ç‡§§‡•á","Kids Wear"],
  products: [
    { id: 1, name: "‡§∏‡§æ‡§¶‡§æ ‡§ü‡•Ä-‡§∂‡§∞‡•ç‡§ü", category: "‡§ü‡•Ä-‡§∂‡§∞‡•ç‡§ü", price: 299, rating: 4.2, image: "tee.jpg" },
    { id: 2, name: "‡§Æ‡§π‡§ø‡§≤‡§æ ‡§ï‡•Å‡§∞‡•ç‡§§‡•Ä", category: "‡§ï‡•Å‡§∞‡•ç‡§§‡•Ä",  price: 499, rating: 4.6, image: "kurti.jpg" },
    { id: 3, name: "‡§ö‡•á‡§ï ‡§∂‡§∞‡•ç‡§ü",     category: "‡§∂‡§∞‡•ç‡§ü",   price: 899, rating: 4.4, image: "shirt.jpg" },
    { id: 4, name: "‡§∏‡•ç‡§ü‡•ç‡§∞‡•á‡§ö ‡§ú‡•Ä‡§®‡•ç‡§∏", category: "‡§ú‡•Ä‡§®‡•ç‡§∏",  price: 1299, rating: 4.5, image: "jeans.jpg" },
    { id: 5, name: "‡§¨‡•ç‡§≤‡•à‡§ï ‡§ú‡•Ç‡§§‡•á",    category: "‡§ú‡•Ç‡§§‡•á",  price: 1499, rating: 4.7, image: "shoes.jpg" },
    { id: 6, name: "‡§ï‡§ø‡§°‡•ç‡§∏ ‡§ü‡•Ä-‡§∂‡§∞‡•ç‡§ü", category: "Kids Wear", price: 199, rating: 4.1, image: "kids-tee.jpg" },
    { id: 7, name: "‡§∏‡§æ‡§°‡§º‡•Ä ‡§∞‡•á‡§°",      category: "‡§ï‡•Å‡§∞‡•ç‡§§‡•Ä", price: 1599, rating: 4.8, image: "saree.jpg" }
  ],
};EDIT HERE (Config Section)
   ========================= */
const CONFIG = {
  shopName: "‡§Æ‡•á‡§∞‡•Ä ‡§ï‡§™‡§°‡§º‡•ã‡§Ç ‡§ï‡•Ä ‡§¶‡•Å‡§ï‡§æ‡§®",
  shopTagline: "Stylish ‡§ï‡§™‡§°‡§º‡•á ‡§∏‡§∏‡•ç‡§§‡•á ‡§¶‡§æ‡§Æ ‡§Æ‡•á‡§Ç!",
  categories: ["‡§∏‡§¨","viratkohli tshirt","rcb jursy ","csk jursy","indian cricker jursy","‡§ü‡•Ä-‡§∂‡§∞‡•ç‡§ü","‡§ï‡•Å,‡•Ä","‡§∂‡§∞‡•ç‡§ü","‡§ú‡•Ä‡§®‡•ç‡§∏"],
  products: [
    { id: 1, name: "‡§∏‡§æ‡§¶‡§æ ‡§ü‡•Ä-‡§∂‡§∞‡•ç‡§ü", category: "‡§ü‡•Ä-‡§∂‡§∞‡•ç‡§ü", price: 299, rating: 4.2, image: "tee.jpg" },
    { id: 2, name: "‡§Æ‡§π‡§ø‡§≤‡§æ ‡§ï‡•Å‡§∞‡•ç‡§§‡•Ä", category: "‡§ï‡•Å‡§∞‡•ç‡§§‡•Ä",  price: 499, rating: 4.6, image: "kurti.jpg" },
    { id: 3, name: "‡§ö‡•á‡§ï ‡§∂‡§∞‡•ç‡§ü",     category: "‡§∂‡§∞‡•ç‡§ü",   price: 899, rating: 4.4, image: "shirt.jpg" },
    { id: 4, name: "‡§∏‡•ç‡§ü‡•ç‡§∞‡•á‡§ö ‡§ú‡•Ä‡§®‡•ç‡§∏", category: "‡§ú‡•Ä‡§®‡•ç‡§∏",  price: 1299, rating: 4.5, image: "jeans.jpg" },
  ],
};EDIT HERE (Config Section)
   ========================= */
const CONFIG = {
  shopName: "‡§Æ‡•á‡§∞‡•Ä ‡§ï‡§™‡§°‡§º‡•ã‡§Ç ‡§ï‡•Ä ‡§¶‡•Å‡§ï‡§æ‡§®",     // <-- ‡§Ö‡§™‡§®‡§æ ‡§∂‡•â‡§™ ‡§®‡•á‡§Æ
  shopTagline: "Stylish ‡§ï‡§™‡§°‡§º‡•á ‡§∏‡§∏‡•ç‡§§‡•á ‡§¶‡§æ‡§Æ ‡§Æ‡•á‡§Ç!", // <-- ‡§ü‡•à‡§ó‡§≤‡§æ‡§á‡§®
  categories: ["‡§∏‡§¨","‡§ü‡•Ä-‡§∂‡§∞‡•ç‡§ü","‡§ï‡•Å‡§∞‡•ç‡§§‡•Ä","‡§∂‡§∞‡•ç‡§ü","‡§ú‡•Ä‡§®‡•ç‡§∏"], // ‡§ú‡•ã ‡§¶‡§ø‡§ñ‡§æ‡§®‡•á ‡§π‡•à‡§Ç
  products: [
    // ‚¨á‚¨á‚¨á ‡§Ö‡§™‡§®‡•á ‡§™‡•ç‡§∞‡•ã‡§°‡§ï‡•ç‡§ü‡•ç‡§∏ ‡§Ø‡§π‡§æ‡§Å ‡§ú‡•ã‡§°‡§º‡•ã/‡§¨‡§¶‡§≤‡•ã
    { id: 1, name: "‡§∏‡§æ‡§¶‡§æ ‡§ü‡•Ä-‡§∂‡§∞‡•ç‡§ü", category: "‡§ü‡•Ä-‡§∂‡§∞‡•ç‡§ü", price: 299, rating: 4.2, image: "tee.jpg" },
    { id: 2, name: "‡§Æ‡§π‡§ø‡§≤‡§æ ‡§ï‡•Å‡§∞‡•ç‡§§‡•Ä", category: "‡§ï‡•Å‡§∞‡•ç‡§§‡•Ä",  price: 499, rating: 4.6, image: "kurti.jpg" },
    { id: 3, name: "‡§ö‡•á‡§ï ‡§∂‡§∞‡•ç‡§ü",     category: "‡§∂‡§∞‡•ç‡§ü",   price: 899, rating: 4.4, image: "shirt.jpg" },
    { id: 4, name: "‡§∏‡•ç‡§ü‡•ç‡§∞‡•á‡§ö ‡§ú‡•Ä‡§®‡•ç‡§∏", category: "‡§ú‡•Ä‡§®‡•ç‡§∏",  price: 1299, rating: 4.5, image: "jeans.jpg" },
    // Example: { id:5, name:"‡§¨‡•ç‡§≤‡•Ç ‡§∏‡§æ‡§°‡§º‡•Ä", category:"‡§ï‡•Å‡§∞‡•ç‡§§‡•Ä", price:1499, rating:4.8, image:"saree.jpg" },
  ],
};
/* ‡§®‡•ã‡§ü:
   - ‡§Ö‡§™‡§®‡•Ä images ‡§ï‡•ã ‡§â‡§∏‡•Ä ‡§´‡§º‡•ã‡§≤‡•ç‡§°‡§∞ ‡§Æ‡•á‡§Ç ‡§∞‡§ñ‡•ã ‡§ú‡§π‡§æ‡§Å index.html ‡§π‡•à (‡§ú‡•à‡§∏‡•á tee.jpg/kurti.jpg ...)
   - ‡§®‡§æ‡§Æ/price/category ‡§Ø‡§π‡•Ä‡§Ç ‡§∏‡•á ‡§¨‡§¶‡§≤‡•ã‡•§ */

// ===== Helper =====
const ‚Çπ = (n)=>"‚Çπ"+Number(n).toLocaleString("en-IN");
const qs = (sel,ctx=document)=>ctx.querySelector(sel);
const qsa= (sel,ctx=document)=>[...ctx.querySelectorAll(sel)];

// ===== State =====
let search = "";
let activeCat = "‡§∏‡§¨";
let sortBy = "reco";
let cart = JSON.parse(localStorage.getItem("cart")||"[]");
let user = JSON.parse(localStorage.getItem("user")||"null");

// ===== Init UI text =====
qs("#shopTitle").textContent = CONFIG.shopName;
qs("#shopTag").textContent = CONFIG.shopTagline;

// ===== Category Chips =====
const catWrap = qs("#catChips");
function renderCats(){
  catWrap.innerHTML = "";
  CONFIG.categories.forEach(c=>{
    const b=document.createElement("button");
    b.className="chip"+(activeCat===c?" active":"");
    b.textContent=c;
    b.onclick=()=>{activeCat=c; render();};
    catWrap.appendChild(b);
  });
}
renderCats();

// ===== Render Products =====
const grid = qs("#grid");
function render(){
  // filter
  let list = CONFIG.products.filter(p=>{
    const inCat = (activeCat==="‡§∏‡§¨") || (p.category===activeCat);
    const inSearch = !search || (p.name.toLowerCase().includes(search) || p.category.toLowerCase().includes(search));
    return inCat && inSearch;
  });
  // sort
  if (sortBy==="price_asc") list.sort((a,b)=>a.price-b.price);
  if (sortBy==="price_desc") list.sort((a,b)=>b.price-a.price);
  if (sortBy==="rating") list.sort((a,b)=>b.rating-a.rating);

  // draw
  grid.innerHTML="";
  if(!list.length){
    grid.innerHTML = `<div class="card" style="grid-column:1/-1;text-align:center;color:#666">‡§ï‡•ã‡§à ‡§â‡§§‡•ç‡§™‡§æ‡§¶ ‡§®‡§π‡•Ä‡§Ç ‡§Æ‡§ø‡§≤‡§æ‡•§</div>`;
    return;
  }
  list.forEach(p=>{
    const card=document.createElement("div");
    card.className="card";
    card.innerHTML = `
      <img src="${p.image}" alt="${p.name}" onerror="this.src='data:image/svg+xml;utf8,${encodeURIComponent(
        `<svg xmlns=&quot;http://www.w3.org/2000/svg&quot; width=&quot;600&quot; height=&quot;400&quot;><rect width=&quot;100%&quot; height=&quot;100%&quot; fill=&quot;#eee&quot;/><text x=&quot;50%&quot; y=&quot;50%&quot; dominant-baseline=&quot;middle&quot; text-anchor=&quot;middle&quot; font-family=&quot;Arial&quot; font-size=&quot;22&quot;>No Image</text></svg>`
      )}'" />
      <div class="title">${p.name}</div>
      <div class="row space">
        <div>
          <div class="price">${‚Çπ(p.price)}</div>
          <div class="muted">‚≠ê ${p.rating.toFixed(1)}</div>
        </div>
        <button class="cta" data-add="${p.id}">‡§ñ‡§∞‡•Ä‡§¶‡•á‡§Ç</button>
      </div>
    `;
    grid.appendChild(card);
  });
  // bind add buttons
  qsa("[data-add]").forEach(btn=>{
    btn.onclick=()=>{
      const id=+btn.getAttribute("data-add");
      const item=CONFIG.products.find(x=>x.id===id);
      addToCart(item);
    };
  });
  updateCartBadge();
}
render();

// ===== Search & Sort =====
qs("#searchBox").addEventListener("input",e=>{
  search = e.target.value.trim().toLowerCase();
  render();
});
qs("#sortSel").addEventListener("change",e=>{
  sortBy = e.target.value;
  render();
});

// ===== Cart =====
const drawer = qs("#cartDrawer");
const cartItemsEl = qs("#cartItems");
const cartTotalEl = qs("#cartTotal");
const cartCountEl = qs("#cartCount");

function updateCartBadge(){
  const count = cart.reduce((s,i)=>s+i.qty,0);
  cartCountEl.textContent = count;
}

function saveCart(){ localStorage.setItem("cart", JSON.stringify(cart)); }

function openCart(){ drawer.classList.add("open"); drawCart(); }
function closeCart(){ drawer.classList.remove("open"); }

qs("#cartBtn").onclick=openCart;
qs("#closeCart").onclick=closeCart;

function addToCart(p){
  const idx = cart.findIndex(i=>i.id===p.id);
  if(idx>-1) cart[idx].qty++;
  else cart.push({id:p.id,name:p.name,price:p.price,image:p.image,qty:1});
  saveCart(); updateCartBadge(); drawCart();
}

function changeQty(i,delta){
  cart[i].qty += delta;
  if(cart[i].qty<=0) cart.splice(i,1);
  saveCart(); updateCartBadge(); drawCart();
}

function removeItem(i){
  cart.splice(i,1); saveCart(); updateCartBadge(); drawCart();
}

function drawCart(){
  cartItemsEl.innerHTML="";
  let total=0;
  cart.forEach((it,i)=>{
    total += it.price*it.qty;
    const row=document.createElement("div");
    row.className="row";
    row.style.margin="8px 0";
    row.innerHTML=`
      <img src="${it.image}" alt="" style="width:54px;height:54px;object-fit:cover;border-radius:10px;border:1px solid var(--border)"/>
      <div style="flex:1">
        <div style="font-weight:600">${it.name}</div>
        <div class="muted">${‚Çπ(it.price)}</div>
      </div>
      <div class="row">
        <button class="qtybtn" data-q="${i}" data-d="-1">‚àí</button>
        <div style="min-width:28px;text-align:center">${it.qty}</div>
        <button class="qtybtn" data-q="${i}" data-d="1">+</button>
      </div>
      <button class="qtybtn danger" data-rm="${i}">‚úñ</button>
    `;
    cartItemsEl.appendChild(row);
  });
  cartTotalEl.textContent = ‚Çπ(total);
  // bind
  qsa("[data-q]").forEach(b=>{
    b.onclick=()=>changeQty(+b.getAttribute("data-q"), +b.getAttribute("data-d"));
  });
  qsa("[data-rm]").forEach(b=>{
    b.onclick=()=>removeItem(+b.getAttribute("data-rm"));
  });
}

// ===== Login =====
const loginModal = qs("#loginModal");
qs("#loginBtn").onclick=()=>loginModal.classList.add("open");
qsa("[data-close]").forEach(x=>x.onclick=()=>qs(x.getAttribute("data-close")).classList.remove("open"));
qs("#loginForm").onsubmit=(e)=>{
  e.preventDefault();
  const fd=new FormData(e.target);
  user = {name:fd.get("name"), phone:fd.get("phone")};
  localStorage.setItem("user", JSON.stringify(user));
  alert("‡§∏‡•ç‡§µ‡§æ‡§ó‡§§ ‡§π‡•à, "+user.name+"!");
  loginModal.classList.remove("open");
};

// ===== Checkout =====
const orderModal = qs("#orderModal");
qs("#checkoutBtn").onclick=()=>{
  if(!cart.length){ alert("‡§ï‡§æ‡§∞‡•ç‡§ü ‡§ñ‡§æ‡§≤‡•Ä ‡§π‡•à!"); return; }
  orderModal.classList.add("open");
  // prefill from user if any
  const f=qs("#orderForm");
  if(user){ f.elements.name.value=user.name; f.elements.phone.value=user.phone; }
};
qs("#orderForm").onsubmit=(e)=>{
  e.preventDefault();
  if(!cart.length){ alert("‡§ï‡§æ‡§∞‡•ç‡§ü ‡§ñ‡§æ‡§≤‡•Ä ‡§π‡•à!"); return; }
  const fd=new FormData(e.target);
  const order = {
    id: "ORD" + Math.floor(Math.random()*1e8).toString().padStart(8,"0"),
    name: fd.get("name"),
    phone: fd.get("phone"),
    address: fd.get("address"),
    items: cart, total: cart.reduce((s,i)=>s+i.price*i.qty,0)
  };
  alert(`‡§ß‡§®‡•ç‡§Ø‡§µ‡§æ‡§¶ ${order.name}! ‡§Ü‡§™‡§ï‡§æ ‡§ë‡§∞‡•ç‡§°‡§∞ ${order.id} ‡§ï‡§®‡•ç‡§´‡§∞‡•ç‡§Æ ‡§π‡•ã ‡§ó‡§Ø‡§æ.\n‡§ï‡•Å‡§≤: ${‚Çπ(order.total)}\n‡§°‡§ø‡§≤‡•Ä‡§µ‡§∞‡•Ä: ${order.address}`);
  cart = []; saveCart(); updateCartBadge(); drawCart();
  orderModal.classList.remove("open");
  closeCart();
};

// ===== Close modal on outside click =====
[loginModal, orderModal, drawer].forEach(el=>{
  el.addEventListener("click",(e)=>{ if(e.target===el){ el.classList.remove("open"); }});
});

// ===== Persisted user/cart on load =====
updateCartBadge();
drawCart();

// ===== Cart open via footer CTA too =====
qs("#checkoutBtn").onclick = ()=>{ if(!cart.length){ alert("‡§ï‡§æ‡§∞‡•ç‡§ü ‡§ñ‡§æ‡§≤‡•Ä ‡§π‡•à!"); } else { orderModal.classList.add("open"); } };
qs("#cartBtn").onclick = openCart;
</script>
</body>
</html>
<footer>
  <div class="foot">
    <div class="muted">üìû 8102997433 ‚Ä¢ üìß newbrand@gmail.com</div>
    <button class="cta" id="checkoutBtn">‚úÖ ‡§ë‡§∞‡•ç‡§°‡§∞ ‡§ï‡§∞‡•á‡§Ç</button>
  </div>
</footer>